/*! poll.js - v0.1.0 - 2014-06-19
* Copyright (c) 2014 Rob Crawford; Licensed MIT */
!function(a,b){"use strict";function c(a){function b(){if(d(j),k(r))h();else{if(i)return;q>r?(n&&(p=n[o++]),j=setTimeout(b,p),f[j]=1,r+=p):g()}}function g(a){i=!0,d(j),a?l&&l.call():m&&m.call(),l=m=j=null}function h(){g(!0)}if(!e){var i,j,k=a.test,l=a.ready,m=a.quit,n=a.intervals,o=0,p=a.frequency||c.frequency,q=a.timeout||c.timeout,r=0;if(n){q=0;for(var s=n.length;s--;)q+=n[s]}return k.quit=g,k.ready=h,j=setTimeout(b,0),f[j]=1,{quit:g,ready:h}}}function d(a){clearTimeout(a),delete f[a]}var e,f={};(b||a).poll=c,c.frequency=250,c.timeout=3e4,c.kill=function(a){for(var b in f)d(b);e=a}}(window);