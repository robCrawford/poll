(function(f,u){function g(a){clearTimeout(a);delete h[a]}function b(a){function b(){g(c);k()?l():s||(m<e?(d&&(n=d[f++]),c=setTimeout(b,n),h[c]=0,m+=n):p())}function p(a){s=!0;g(c);a?q&&q.call():r&&r.call();q=r=c=null}function t(){p()}function l(){p(!0)}var k=a.test,q=a.ready,r=a.quit,d=a.intervals,f=0,n=a.frequency||250,e=a.timeout||3E4,m=0,s,c;if(d)for(e=0,a=d.length;a--;)e+=d[a];k.quit=t;k.ready=l;b();return{quit:t,ready:l}}var h={};(u||f).poll=b;b.kill=function(){for(var a in h)g(a)}})(window);
