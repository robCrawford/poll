(function(u,v){function g(a){clearTimeout(a);delete h[a]}function b(a){function r(){g(c);k()?l():s||(m<e?(d&&(n=d[b++]),c=setTimeout(r,n),h[c]=0,m+=n):f())}function f(a){s=!0;g(c);a?p&&p.call():q&&q.call();p=q=c=null}function l(){f(!0)}if(!t){var k=a.test,p=a.ready,q=a.quit,d=a.intervals,b=0,n=a.frequency||250,e=a.timeout||3E4,m=0,s,c;if(d)for(e=0,a=d.length;a--;)e+=d[a];k.quit=f;k.ready=l;setTimeout(r,0);return{quit:f,ready:l}}}var h={},t;(v||u).poll=b;b.kill=function(a){for(var b in h)g(b);t=a}})(window);
