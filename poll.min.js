/*
 Copyright 2013 Rob Crawford
 https://github.com/robCrawford/poll
 Released under the MIT license
 http://www.opensource.org/licenses/mit-license.php
*/
(function(f,g){(g||f).poll=function(a){function l(){f()?c(!0):h<d?(b&&(i=b[g++]),e=setTimeout(l,i),h+=i):c(!1)}function c(a){e&&clearTimeout(e);a?j&&j.call():k&&k.call();j=k=e=null}var f=a.test,j=a.ready,k=a.quit,b=a.intervals,g=0,i=a.frequency||250,d=a.timeout||3E4,h=0,e;if(b){d=0;for(a=b.length;a--;)d+=b[a]}l();return{quit:function(){c(!1)},ready:function(){c(!0)}}}})(window);
